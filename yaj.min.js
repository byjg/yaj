//! Yaj - Yet Another jQuery Replacement
//! http://opensource.byjg.com/yaj
document.querySelectorAll||(document.querySelectorAll=function(selectors){var element,style=document.createElement("style"),elements=[];for(document.documentElement.firstChild.appendChild(style),document._qsa=[],style.styleSheet.cssText=selectors+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),style.parentNode.removeChild(style);document._qsa.length;)(element=document._qsa.shift()).style.removeAttribute("x-qsa"),elements.push(element);return document._qsa=null,elements}),document.querySelector||(document.querySelector=function(selectors){var elements=document.querySelectorAll(selectors);return elements.length?elements[0]:null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var matches=(this.document||this.ownerDocument).querySelectorAll(s),i=matches.length;--i>=0&&matches.item(i)!==this;);return i>-1});try{var storage=window.localStorage,x="__storage_test__";storage.setItem(x,x),storage.removeItem(x)}catch(e){window.yajLocalStorage="yaj_",window.localStorage={getItem:function(sKey){return sKey&&this.hasOwnProperty(sKey)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+yajLocalStorage+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(nKeyId){var regex=new RegExp(yajLocalStorage+"(.*?)=","g"),keys=document.cookie.match(regex);return unescape(keys[nKeyId]).replace(regex,"$1")},setItem:function(sKey,sValue){sKey&&(document.cookie=yajLocalStorage+escape(sKey)+"="+escape(sValue)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(sKey){sKey&&this.hasOwnProperty(sKey)&&(document.cookie=yajLocalStorage+escape(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(sKey){return new RegExp("(?:^|;\\s*)"+yajLocalStorage+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},window.localStorage.length=(document.cookie.match(new RegExp(yajLocalStorage+"(.*?)=","g"))||window.localStorage).length}if(void 0===Yaj){window.yoIs=function(objectToCheck,type){var getType={};return objectToCheck&&(null!==getType.toString.call(objectToCheck).match(new RegExp("\\[object "+type+"\\]"))||objectToCheck.constructor&&objectToCheck.constructor.name&&null!==objectToCheck.constructor.name.match(new RegExp(type)))},window.yoIsFunction=function(object){return yoIs(object,"Function")},window.yoIsWindow=function(object){return yoIs(object,"Window")},window.yoIsArray=function(object){return yoIs(object,"Array")},window.yoIsDocument=function(object){return yoIs(object,"HTML.*Document")},window.yoIsHtmlElement=function(object){return yoIs(object,"HTML.*Element")},window.yoIsYaj=function(object){return yoIs(object,"Yaj")},window.yoGetParameter=function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},window.yoXhr=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")},window.yo=function(element){return new Yaj(element)},window.yoReady=function(fn){/in/.test(document.readyState)?setTimeout(yoReady,9,fn):fn()},window.yoCopy=function(source,dest){for(var attrname in source)source.hasOwnProperty(attrname)&&(dest[attrname]=source[attrname])},window.yoClone=function(obj){if(null===obj||"object"!=typeof obj)return obj;var copy=obj.constructor();for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=obj[attr]);return copy};var Yaj=function(){function Yaj(element){if(_result=[],"string"==typeof element)try{this.element=document.querySelectorAll(element)}catch(e){var wrapper=document.createElement("div");wrapper.innerHTML=element,this.element=[];for(var i=0;i<wrapper.childNodes.length;i++)this.element.push(wrapper.childNodes[i])}else yoIsArray(element)?this.element=element:this.element=[element]}function _isVisible(el){return void 0!==el&&null!==el&&!!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}var _result=[],_events={};return Yaj.prototype._base=function(method,prop1,prop2,prop3){for(var bool=!1,results=[],i=0;i<this.element.length;i++){var r=method(this.element[i],prop1,prop2,prop3);results.push(r),bool=bool||r}return _result=0===results.length?null:1===results.length?results[0]:results,bool},Yaj.prototype.el=function(n){return this.els(n||0)},Yaj.prototype.els=function(n){return null===this.element||void 0===this.element?null:void 0===n?this.element:n>=this.element.length?null:this.element[n]},Yaj.prototype.eq=function(n){return yo(this.els(n))},Yaj.prototype.hasClass=function(className){return this._base(function(el,className){return el.classList?el.classList.contains(className):!!el.className.match(new RegExp("(\\s|^)"+className+"(\\s|$)"))},className)},Yaj.prototype.isVisible=function(){return this._base(_isVisible)},Yaj.prototype.exists=function(){return this.element&&this.element.length>0},Yaj.prototype.addClass=function(className){for(var classAr=className.split(" "),i=0;i<classAr.length;i++)this._base(function(el,className){el.classList?el.classList.add(className):yo(el).hasClass(className)||(el.className+=" "+className)},classAr[i]);return this},Yaj.prototype.removeClass=function(className){void 0!==className&&null!==className||(className="");for(var classAr=className.split(" "),i=0;i<classAr.length;i++)this._base(function(el,className){if(""!==className.trim()){if(el.classList)el.classList.remove(className);else if(yo(el).hasClass(className)){var reg=new RegExp("(\\s|^)"+className+"(\\s|$)");el.className=el.className.replace(reg," ")}}else el.className=""},classAr[i]);return this},Yaj.prototype.toggleClass=function(className){return this._base(function(el,className){var me=yo(el);me.hasClass(className)?me.removeClass(className):me.addClass(className)},className),this},Yaj.prototype.toggle=function(callback){return this._base(function(el){var me=yo(el);me.isVisible()?me.hide(callback):me.show(callback)}),this},Yaj.prototype.show=function(callback){return this.fadeIn(200,callback),this},Yaj.prototype.hide=function(callback){return this.fadeOut(200,callback),this},Yaj.prototype.append=function(data){return this._base(function(el,data){var children;if("string"==typeof data){var wrapper=document.createElement("div");wrapper.innerHTML=data,children=wrapper.childNodes}else{if(!yoIsYaj(data))return el.appendChild(data);children=data.element}for(var i=0;i<children.length;i++)el.appendChild(children[i].cloneNode(!0))},data),this},Yaj.prototype.appendTo=function(data){return"string"==typeof data?yo(data).append(this):yoIsYaj(data)?data.append(this):this._base(function(el,data){data.appendChild(el.cloneNode(!0))},data),this},Yaj.prototype.children=function(data){for(var newElement=[],i=0;i<this.element.length;i++)for(var findR=this.element[i].children,j=0;j<findR.length;j++)data&&!findR[j].matches(data)||newElement.push(findR[j]);return yo(newElement)},Yaj.prototype.find=function(data){for(var newElement=[],i=0;i<this.element.length;i++)for(var findR=this.element[i].querySelectorAll(data),j=0;j<findR.length;j++)newElement.push(findR[j]);return yo(newElement)},Yaj.prototype.first=function(){return this.exists()?yo(this.els(0)):null},Yaj.prototype.last=function(){return this.exists()?yo(this.els(this.element.length-1)):null},Yaj.prototype.remove=function(){return this._base(function(el){el.parentNode.removeChild(el)}),this},Yaj.prototype.isCollideWith=function(data){return this._base(function(elSrc,elDest){if(void 0!==elSrc||void 0!==elDest)return!1;elDest=yoIsYaj(elDest)?elDest.element:[elDest];for(var rect1=elSrc.getBoundingClientRect(),result=!1,i=0;i<elDest.length;i++){var rect2=elDest.getBoundingClientRect();result=result||!(rect1.top>rect2.bottom||rect1.right<rect2.left||rect1.bottom<rect2.top||rect1.left>rect2.right)}return result},data)},Yaj.prototype.attr=function(property,value,convertHtmlEntity){return"for"===property&&(property="htmlFor"),this._base(function(el,prop,value){if(void 0===value||null===value)return el[prop];if("style"===prop)for(var list=value.split(";"),i=0;i<list.length;i++){var parts=list[i].split(":");2===parts.length&&(el.style[parts[0].replace(/^\s+|\s+$/g,"")]=parts[1].replace(/^\s+|\s+$/g,""))}else{if(!0===convertHtmlEntity){var d=document.createElement("div");d.innerHTML=value,value=d.innerText}el[prop]=value}},property,value),void 0===value||null===value?_result:this},Yaj.prototype.css=function(property,value){return this._base(function(el,prop,value){if(void 0===value||null===value)return el.style[prop];el.style[prop]=value},property,value),void 0===value||null===value?_result:this},Yaj.prototype.html=function(value){return this._base(function(el,value){if(void 0===value||null===value)return el.innerHTML;el.innerHTML=value},value),void 0===value||null===value?_result:this},Yaj.prototype.text=function(value){return this._base(function(el,value){if(void 0===value||null===value)return el.innerText;el.innerText=value},value),void 0===value||null===value?_result:this},Yaj.prototype.on=function(event,fn){return this._base(function(el,event,fn){el.attachEvent?el.attachEvent("on"+event,fn):el.addEventListener&&el.addEventListener(event,fn,!0)},event,fn),this},Yaj.prototype.off=function(){this._base(function(element){for(var clone=element.cloneNode();element.firstChild;)clone.appendChild(element.firstChild);element.parentNode.replaceChild(clone,element)})},Yaj.prototype.bind=function(event,fn){return _events[event]||(Event?_events[event]=new Event(event):(_events[event]=document.createEvent(event),_events[event].initEvent(event,!0,!0))),this.on(event,fn),this},Yaj.prototype.trigger=function(event){return _events[event]?(this._base(function(el,event){el.dispatchEvent(_events[event])},event),this):this},Yaj.prototype.offset=function(){return this._base(function(el){var curleft=0,curtop=0;if(el.offsetParent){var elParent=el;do{curleft+=elParent.offsetLeft,curtop+=elParent.offsetTop}while(elParent=elParent.offsetParent)}return{left:curleft,top:curtop,width:el.offsetWidth,height:el.offsetHeight}}),_result},Yaj.get=function(url,data,success,error){Yaj.request({method:"GET",url:url,data:data,success:success,error:error})},Yaj.post=function(url,data,success,error){Yaj.request({method:"POST",url:url,data:data,success:success,error:error})},Yaj.request=function(options){var xhr=new yoXhr;if(xhr.open(options.method,options.url,!0),options.headers)for(var key in options.headers)options.headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,options.headers[key]);options.uploadProgress&&(xhr.upload.onprogress=options.uploadProgress),options.downloadProgress&&(xhr.onprogress=options.downloadProgress),xhr.onreadystatechange=function(){4===this.readyState&&(200!==this.status?yoIsFunction(options.error)&&options.error(this.responseText,this.statusText,this):yoIsFunction(options.success)&&options.success(this.responseText,this.statusText,this))},xhr.send(options.data)},Yaj.getJson=function(url,data,success,error){Yaj.get(url,data,function(result){success(JSON.parse(result))},error)},Yaj.postJson=function(url,data,success,error){Yaj.post(url,data,function(result){success(JSON.parse(result))},error)},Yaj.isElementInDocument=function(element){return yoIsYaj(element)&&(element=element.el()),element===document||!!(element=element.parentNode)&&Yaj.isElementInDocument(element)},Yaj.getScript=function(src,func){var script=document.createElement("script");script.async="async",script.src=src,func&&(script.onload=func),document.getElementsByTagName("head")[0].appendChild(script)},Yaj.loadCss=function(href,rel,type){yoIsArray(href)||(href=[href]);for(var i=0;i<href.length;i++){var css=document.createElement("link");css.rel=rel||"stylesheet",css.type=type||"text/css",css.href=href[i],document.head.appendChild(css)}},Yaj.prototype.scrollTo=function(to,duration){return this._base(function(element,to,duration){if(!(duration<=0)){var perTick=(to-element.scrollTop)/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick,element.scrollTop!==to&&yo(element).scrollTo(to,duration-10)},10)}},to,duration),this},Yaj.prototype.fade=function(type,ms,callback){function func(el,opacity,checkEnd){opacity=isIn?opacity+gap:opacity-gap,el.style.opacity=opacity,opacity<=0&&(el.style.display="none"),opacity<=0||opacity>=1?checkEnd():window.setTimeout(function(){func(el,opacity,checkEnd)},interval)}function checkEnd(){++count>=total&&callback&&callback()}if(this.element)for(var isIn="in"===type,interval=50,gap=interval/ms,count=0,total=this.element.length,i=0;i<this.element.length;i++){var opacity=isIn?0:1;if(isIn){if(_isVisible(this.element[i])){checkEnd();continue}this.element[i].style.display=this.element[i]["yo-original-display"]||"block",this.element[i].style.opacity=opacity}else{if(!_isVisible(this.element[i])){checkEnd();continue}this.element[i]["yo-original-display"]=this.element[i].style.display}!function(el,opacity){setTimeout(function(){func(el,opacity,checkEnd)},1)}(this.element[i],opacity)}},Yaj.prototype.fadeIn=function(ms,callback){return this.fade("in",ms,callback),this},Yaj.prototype.fadeOut=function(ms,callback){return this.fade("out",ms,callback),this},Yaj}()}